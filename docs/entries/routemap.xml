<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="../entries2html.xsl" ?>
<entry name="routemap" namespace="fn" type="widget" widgetnamespace="mobile" event-prefix="routemap">
	<title>Routemap Widget</title>
	<desc>Creates a routemap widget.</desc>
	<longdesc>
		<h3>Route Map</h3>
		<p>Routemap is a jquery mobile plugin to render a route data.</p>
		<p>Routemap draws the lines between above two stations automatically, and it indicates a shortest or minimum transfer route between two stations that user selected</p>
		<p>Routemap supports JSON for DB ( routemap data ), so it's possible to set DB by setting a file path or a variable on widget, and it allows us to modify each style of stations, routes, and labels easily</p>
		<p>And also, it supports a multi-language.</p>

<pre><code>
&lt;div data-role=&quot;routemap&quot; data-db=&quot;data.json&quot;&gt;
&lt;/div&gt;
</code></pre>
		<p>To create a routemap, create a container and add the data-role="routemap" attribute. Using data-db attribute allows you to set a DB for the lines, stations, label and each style.</p>
	</longdesc>

	<added>0.3.0</added>
	<options>
		<option name="db" default="null" example-value="&quot;data.json&quot;">
			<desc>
				<p>The URL of a JSON file or a javascript variable to load.</p>
			</desc>
			<type name="String" />
		</option>
		<option name="language" default="null" example-value="&quot;en&quot;">
			<desc>
				<p>Determine the current languauge. The values must be the abbreviation of language names(ex: English > en )</p>
			</desc>
			<type name="String" />
		</option>
		<option name="unit" default="1" example-value='10'>
			<desc>
				<p>The length unit of the route map. If the value is 10 and a station coordinate is (1, 2) 
					then the station will be displayed at (10, 20).</p>
			</desc>
			<type name="Integer" />
		</option>
	</options>
	<events>
		<event name="create">
			<desc>Triggered when a widget is created.
			</desc>
			<argument name="event" type="Event">
				<desc></desc>
			</argument>
			<argument name="ui" type="Object">
				<desc></desc>
			</argument>
		</event>
		<event name="select">
			<desc>Triggered when a station or line is selected.
			</desc>
			<argument name="event" type="Event">
				<desc></desc>
			</argument>
			<argument name="id" type="String">
				<desc>selected station or line id </desc>
			</argument>
		</event>
	</events>
	<methods>
		<method name="getIdsByName">
			<desc>Gets an array of station or line ids associated with the specified station or line name.
			</desc>
				<argument name="name" type="String">
					<desc>The name of station or line</desc>
				</argument>
		</method>
		<method name="getNameById">
			<desc>Gets a string of station or line name with associated the specified station or line id.
			</desc>
				<argument name="code" type="String">
					<desc>The id of station or line</desc>
				</argument>
		</method>
		<method name="shortestRoute">
			<desc>Returns an array of station ids which is the shortest route from source to destination.
			</desc>
				<argument name="source" type="String">
					<desc>a station id of source</desc>
				</argument>
				<argument name="destination" type="String">
					<desc>a station id of destination</desc>
				</argument>
<pre><code>
var widget = $( "#routemapTest" ),
	startId = widget.routemap( "getIdsByName", "21" )[0],
	endId = widget.routemap( "getIdsByName", "7(ex)" )[0],
	path;

widget.on( "vclick", function () {
	path = widget.routemap( "shortestRoute", startId, endId );
	widget.routemap( "highlight", path );
});
</code></pre>

		</method>
		<method name="minimumTransfers">
			<desc>Returns an array of station ids which is the route having minimum transfers from source to destination.
			</desc>
				<argument name="source" type="String">
					<desc>The staion id of source</desc>
				</argument>
				<argument name="destination" type="String">
					<desc>The staion id of destination</desc>
				</argument>
		</method>
		<method name="highlight">
			<desc>Adds a highlighting style to stations.
			</desc>
				<argument name="stations" type="Array">
					<desc>The array of staion id</desc>
				</argument>
		</method>
		<method name="dishighlight">
			<desc>Removes a highlighting style from stations.
			</desc>
				<argument name="stations" type="Array">
					<desc>The array of staion id</desc>
				</argument>
		</method>
		<method name="refresh" example-params="options">
			<desc>Resizes&amp;redraws the widget, after having made some external modifications.
			</desc>
				<argument name="redraw" default='false' type="Boolean">
					<desc>When set to true, the widget will redraw all of elements by a route data.<br />Only re-layout the widget if set to false.</desc>
				</argument>
		</method>
	</methods>
	<example>
		<desc>A basic example of a page with routemap.</desc>
		<html><![CDATA[<div data-role="header">
		<h1>Web UI Framework Example</h1>
	</div>
	<div data-role="content">
		<script>
			var DB_DATA = {
				"name": "Example Route Map",
				"exchangeStyle": {
					"backgroundColor": "white",
					"borderColor": "gray",
					"width" : 12,
					"height" : 12
				},
				"lines": [{
					"id": "line1",
					"name": "Line 1",
					"style": {
						"line" : { "stroke": "blue" },
						"station": {
							"borderColor": "blue",
							"width" : 8,
							"height" : 8
						}
					},
					"branches": [
						[
							{ "id": "1", "coordinates": [ 1, 2 ], "label": "1", "labelPosition": "ne", "labelAngle": 45 },
							{ "id": "2", "coordinates": [ 2, 2 ], "label": "2(ex)", "labelPosition": "ne", "labelAngle": 45 },
							{ "id": "3", "coordinates": [ 3, 2 ], "label": "3", "labelPosition": "ne", "labelAngle": 45 },
							{ "id": "4", "coordinates": [ 4, 2 ], "label": "4(ex)", "labelPosition": "ne", "labelAngle": 45 },
							{ "id": "5", "coordinates": [ 5, 3 ], "label": "5(ex)", "labelPosition": "ne", "labelAngle": 45 },
							{ "id": "6", "coordinates": [ 6, 3 ], "label": "6", "labelPosition": "ne", "labelAngle": 45 },
							{ "id": "7", "coordinates": [ 7, 3 ], "label": "7(ex)", "labelPosition": "ne", "labelAngle": 45 },
							{ "id": "8", "coordinates": [ 8, 4 ], "label": "8(ex)", "labelPosition": "ne", "labelAngle": 45 }
						]
					]
				}]
			};
		</script>
		<div data-role="routemap" data-db="DB_DATA" data-unit="50"></div>
	</div>]]></html>
	</example>
	<category slug="widgets"/>
</entry>
